<div class="master-container">

<%= form_tag team_members_shifts_bulk_actions_path, method: :put do %>

  <table>
    <tr>
      <td width="40%">
        <h1 align="center">
          Shifts<br>
          <%= link_to 'New Shift', new_team_members_shift_path, class: "btn btn-primary btn-lg transplant-button" %><br><br>
          Bulk Actions<br>
          <%= submit_tag "Log With Pay", class: "btn btn-primary btn-lg transplant-button" %><%= submit_tag "Log Without Pay", class: "btn btn-primary btn-lg transplant-button" %><%= submit_tag "Log Pay Only", class: "btn btn-primary btn-lg transplant-button" %><br>
        </h1>

        <table class="index-table">
          <thead>
            <tr>
              <th align="center" style="padding:8px;" ></th>
              <th align="center" style="padding:8px;">Team member</th>
              <th align="center" style="padding:8px;">Planned Shift date</th>
              <th align="center" style="padding:8px;">Planned Shift hrs</th>
              <th align="center" style="padding:8px;">Planned Shift pay</th>
              <th align="center" style="border-left:solid 1px black; padding:8px;">Actual Shift date</th>
              <th align="center" style="padding:8px;">Actual Shift hrs</th>
              <th align="center" style="padding:8px;">Paid?</th>
              <th colspan="4"></th>
            </tr>
          </thead>

          <tbody>
            <% @team_members_shifts.each do |team_members_shift| %>
              <% if team_members_shift.actual_shift_date != nil and team_members_shift.actual_shift_hrs != nil and team_members_shift.paid == true %>
                <tr style="background-color: green;">
              <% elsif team_members_shift.actual_shift_date == nil and team_members_shift.actual_shift_hrs == nil and team_members_shift.paid == true %>
                <tr style="background-color: yellow;">
              <% else %>
                <tr>
              <% end %>    
                <td>
                  <table cellpadding="0" cellspacing="0" border="0">
                    <tr>
                      <td>
                        <%= check_box_tag("shift_ids[]", team_members_shift.id, false, :class => "checkbox-inline-shifts") %>
                      </td>
                      <td>
                        <%= link_to 'Log', team_members_shifts_log_path(team_members_shift: team_members_shift), class: "btn btn-primary btn-md" %>
                      </td>
                    </tr>
                  </table>
                </td>
                <td align="center"><%= team_members_shift.team_member.fname %> <%= team_members_shift.team_member.lname %></td>
                <td align="center"><%= team_members_shift.planned_shift_date.strftime("%a %d %b") %></td>
                <td align="center"><%= team_members_shift.planned_shift_hrs %></td>
                <td align="center">$<%= team_members_shift.planned_shift_hrs * 15 %></td>
                <td align="center" style="border-left:solid 1px black;"><%= team_members_shift.actual_shift_hrs %></td>
                <td align="center"><%= team_members_shift.actual_shift_date %></td>
                <td align="center"><%= team_members_shift.paid %></td>
                <td align="center"><%= link_to 'Clone', team_members_shifts_clone_path(shift: team_members_shift), class: "btn btn-primary btn-md" %></td>
                <td align="center"><%= link_to 'Show', team_members_shift %></td>
                <td align="center"><%= link_to 'Edit', edit_team_members_shift_path(team_members_shift) %></td>
                <td align="center"><%= link_to 'Destroy', team_members_shift, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>

        <br>

        
      </td>
      <td width="10%">
        
      </td>
      <td width="40%" align="center" style="vertical-align: top;padding-top:200px;">
        <h2>Shifts this week</h2>
        <h3><%= @actual_shifts_this_week.count %> completed of <%= @planned_shifts_this_week.count %> planned</h3>
        
        <h2>Hours this week</h2>
        <h3><%= @actual_hours_this_week %> completed of <%= @planned_hours_this_week %> planned</h3>
        
        <h2>Anticipated cash needs this week</h2>
        <h3>$ <%= @planned_hours_this_week * 15 %></h3>
        
        <h2>Cash paid this week so far</h2>
        <h3>$ <%= @paid_hrs_this_week * 15 %></h3>
        
        <br>
        <hr>
        <br>

        <h2>Labor Hrs Log</h2>
        <table class="index-table">
          <thead>
            <tr>
              <th>week of</th>
              <th>total labor hrs</th>
              <th>total cost</th>
              <th>total paid</th>
            </tr>
          </thead>
          <% @history.each{|wk| %>
            <tr>
              <td align="center"><%= wk[0] %></td>
              <td align="center"><%= wk[1] %></td>
              <td align="center">$<%= wk[1] * 15 %></td>
              <td align="center">$<%= wk[-1] * 15 %></td>
            </tr>
          <% } %>
        </table>
      </td>
    </tr>
  </table>

<% end %>

</div>